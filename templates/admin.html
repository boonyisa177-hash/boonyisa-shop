{% extends 'base.html' %}

{% block title %}Admin Dashboard - Boonyisa Hotel{% endblock %}

{% block content %}
  <div class="container">
    <div class="d-flex justify-content-between align-items-center my-4">
      <h3 class="mb-0">Boonyisa Hotel Admin</h3>
      <div class="d-flex gap-2">
        <a href="{{ url_for('admin_bookings') }}" class="btn btn-outline-success btn-sm">üìä ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</a>
        <a href="{{ url_for('view_booking') }}" class="btn btn-outline-info btn-sm">üìã ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</a>
        <a href="{{ url_for('logout') }}" class="btn btn-outline-secondary btn-sm">Logout</a>
      </div>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="alert alert-{{ 'danger' if category == 'error' else category if category in ['success','info','warning'] else 'info' }}">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="row">
      <div class="col-lg-5">
        <div class="card p-4 mb-4">
          <h4 class="mb-4">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</h4>
          <form method="post" action="{{ url_for('admin_add') }}">
            <div class="mb-3"><label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á</label><input name="name" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô Deluxe Room" required></div>
            <div class="mb-3"><label class="form-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡πâ‡∏≠‡∏á</label><input name="room_type" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô Deluxe, Suite" required></div>
            <div class="mb-3"><label class="form-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∏ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô)</label><input name="capacity" type="number" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô 2" required></div>
            <div class="mb-3"><label class="form-label">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏Ñ‡∏∑‡∏ô (‡∏ö‡∏≤‡∏ó)</label><input name="price_per_night" type="number" step="0.01" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô 2500" required></div>
            <div class="mb-3"><label class="form-label">‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label><input name="image_url" class="form-control" placeholder="https://..."></div>
            <div class="mb-3"><label class="form-label">‡∏™‡∏¥‡πà‡∏á‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å</label><input name="amenities" class="form-control" placeholder="WiFi, AC, TV, Mini Bar"></div>
            <button class="btn btn-primary w-100">‚úì ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</button>
          </form>
        </div>
      </div>

      <div class="col-lg-7">
        <h4 class="mb-4">üìã ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h4>
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>#</th>
                <th>‡∏ä‡∏∑‡πà‡∏≠</th>
                <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                <th>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∏</th>
                <th>‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏Ñ‡∏∑‡∏ô</th>
                <th>‡∏£‡∏π‡∏õ</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {% for room in rooms %}
              <tr>
                <td>{{ room.id }}</td>
                <td>{{ room.name }}</td>
                <td>{{ room.room_type }}</td>
                <td>üë• {{ room.capacity }}</td>
                <td><span class="text-success">‡∏ø{{ '%.2f'|format(room.price_per_night) }}</span></td>
                <td><img src="{{ room.image_url or 'https://images.unsplash.com/photo-1631049307264-da0ec9d70304?auto=format&fit=crop&w=60&q=80' }}" height="50" class="rounded"></td>
                <td>
                  <form method="post" action="{{ url_for('admin_delete', room_id=room.id) }}" onsubmit="return confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?');" style="display:inline;">
                    <button class="btn btn-sm btn-danger">‡∏•‡∏ö</button>
                  </form>
                </td>
              </tr>
              {% else %}
              <tr><td colspan="7" class="text-muted text-center">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

