{% extends 'base.html' %}

{% block title %}Boonyisa Hotel - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å{% endblock %}

{% block content %}
  <header class="hero mb-5">
	<div class="container text-center text-white">
	  <h1 class="display-5 fw-bold">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà Boonyisa Hotel</h1>
	  <p class="lead">‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏ö‡∏≤‡∏¢ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°</p>
	  <a href="#rooms" class="btn btn-primary btn-lg">‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡πÄ‡∏•‡∏¢</a>
	</div>
  </header>

  <main class="container mb-5">
	<div class="d-flex justify-content-between align-items-center mb-4">
	  <h2 id="rooms" class="h4 mb-0">‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà</h2>
	  <small class="text-muted">‡∏°‡∏µ {{ rooms|length }} ‡∏´‡πâ‡∏≠‡∏á</small>
	</div>

	<div class="row g-4">
	  {% for room in rooms %}
	  <div class="col-12 col-md-6 col-lg-3">
		<div class="card room-card h-100">
		  <img src="{{ room.image_url or 'https://images.unsplash.com/photo-1631049307264-da0ec9d70304?auto=format&fit=crop&w=600&q=85' }}" class="card-img-top" alt="{{ room.name }}">
		  <div class="card-body d-flex flex-column">
			<div class="mb-2">
			  <h5 class="card-title mb-1">{{ room.name }}</h5>
			  <span class="badge bg-info text-dark">{{ room.room_type }}</span>
			</div>
			<p class="text-muted mb-2">üë• ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô: {{ room.capacity }} ‡∏Ñ‡∏ô<br><small class="room-amenities">{{ room.amenities }}</small></p>
			<p class="card-text text-muted mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏Ñ‡∏∑‡∏ô: ‡∏ø{{ '%.2f'|format(room.price_per_night) }}</p>
			<div class="mt-auto">
				  <a href="{{ url_for('booking', room_id=room.id) }}" class="btn btn-primary btn-sm w-100">‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏ô‡∏µ‡πâ</a>
				  <div class="mt-2 small text-muted text-center">
					{% set room_reviews = get_reviews(room.id) %}
					{% if room_reviews %}
						{% set avg = (room_reviews|map(attribute='rating')|list|sum) / (room_reviews|length) %}
						<span class="text-warning">{{ '‚òÖ' * (avg|round(0,'floor')) }}</span>
						<span> ({{ room_reviews|length }}) ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</span>
					{% else %}
						<span class="text-muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</span>
					{% endif %}
				  </div>
			</div>
		  </div>
		</div>
	  </div>
	  {% else %}
	  <div class="col-12">
		<p class="text-muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</p>
	  </div>
	  {% endfor %}
	</div>
  </main>
{% endblock %}


